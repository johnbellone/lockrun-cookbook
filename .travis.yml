---
language: ruby
notifications:
  slack: bloomberg-rnd:eHp3Czg42iGzaTgG8sAFeD9v
before_install:
  - chef --version
  - eval "$(chef shell-init bash)"
  - cookstyle --version
  - foodcritic --version
install:
  - berks
  - chef gem install poise -v '~> 2.0'
  - chef gem install poise-boiler
jobs:
  include:
    - stage: lint
      script: cookstyle
    - stage: syntax
      script: foodcritic .
    - stage: unit
      script: chef exec rspec
cache:
  directories:
    - "$HOME/.berkshelf"
addons:
  apt:
    sources:
      - chef-stable-trusty
    packages:
      - chefdk
branches:
  only:
    - master
matrix:
  fast_finish: true
